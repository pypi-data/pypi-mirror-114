{"version":3,"sources":["baseCommentModelTests.es6.js"],"names":[],"mappings":"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","file":"baseCommentModelTests.js","sourcesContent":["suite('rb/resources/models/BaseComment', function() {\n    const strings = RB.BaseComment.strings;\n    let parentObject;\n    let model;\n\n    beforeEach(function() {\n        parentObject = new RB.BaseResource({\n            'public': true,\n        });\n\n        model = new RB.BaseComment({\n            parentObject: parentObject,\n        });\n\n        expect(model.validate(model.attributes)).toBe(undefined);\n    });\n\n    describe('State values', function() {\n        it('STATE_DROPPED', function() {\n            expect(RB.BaseComment.STATE_DROPPED).toBe('dropped');\n        });\n\n        it('STATE_OPEN', function() {\n            expect(RB.BaseComment.STATE_OPEN).toBe('open');\n        });\n\n        it('STATE_RESOLVED', function() {\n            expect(RB.BaseComment.STATE_RESOLVED).toBe('resolved');\n        });\n    });\n\n    describe('destroyIfEmpty', function() {\n        beforeEach(function() {\n            spyOn(model, 'destroy');\n        });\n\n        it('Destroying when text is empty', function() {\n            model.set('text', '');\n            model.destroyIfEmpty();\n            expect(model.destroy).toHaveBeenCalled();\n        });\n\n        it('Not destroying when text is not empty', function() {\n            model.set('text', 'foo');\n            model.destroyIfEmpty();\n            expect(model.destroy).not.toHaveBeenCalled();\n        });\n    });\n\n    describe('parse', function() {\n        beforeEach(function() {\n            model.rspNamespace = 'my_comment';\n        });\n\n        it('API payloads', function() {\n            const data = model.parse({\n                stat: 'ok',\n                my_comment: {\n                    id: 42,\n                    issue_opened: true,\n                    issue_status: 'resolved',\n                    text: 'foo',\n                },\n            });\n\n            expect(data).not.toBe(undefined);\n            expect(data.id).toBe(42);\n            expect(data.issueOpened).toBe(true);\n            expect(data.issueStatus).toBe(RB.BaseComment.STATE_RESOLVED);\n            expect(data.text).toBe('foo');\n        });\n    });\n\n    describe('toJSON', function() {\n        describe('force_text_type field', function() {\n            it('With value', function() {\n                model.set('forceTextType', 'html');\n                const data = model.toJSON();\n                expect(data.force_text_type).toBe('html');\n            });\n\n            it('Without value', function() {\n                const data = model.toJSON();\n                expect(data.force_text_type).toBe(undefined);\n            });\n        });\n\n        describe('include_text_types field', function() {\n            it('With value', function() {\n                model.set('includeTextTypes', 'html');\n                const data = model.toJSON();\n                expect(data.include_text_types).toBe('html');\n            });\n\n            it('Without value', function() {\n                const data = model.toJSON();\n\n                expect(data.include_text_types).toBe(undefined);\n            });\n        });\n\n        describe('issue_opened field', function() {\n            it('Default', function() {\n                const data = model.toJSON();\n                expect(data.issue_opened).toBe(null);\n            });\n\n            it('With value', function() {\n                model.set('issueOpened', false);\n                let data = model.toJSON();\n                expect(data.issue_opened).toBe(false);\n\n                model.set('issueOpened', true);\n                data = model.toJSON();\n                expect(data.issue_opened).toBe(true);\n            });\n        });\n\n        describe('issue_status field', function() {\n            it('When not loaded', function() {\n                model.set('issueStatus', RB.BaseComment.STATE_DROPPED);\n                const data = model.toJSON();\n                expect(data.issue_status).toBe(undefined);\n            });\n\n            it('When loaded and parent is not public', function() {\n                parentObject.set('public', false);\n\n                model.set({\n                    loaded: true,\n                    issueStatus: RB.BaseComment.STATE_DROPPED,\n                    parentObject: parentObject,\n                });\n\n                const data = model.toJSON();\n                expect(data.issue_status).toBe(undefined);\n            });\n\n            it('When loaded and parent is public', function() {\n                parentObject.set('public', true);\n\n                model.set({\n                    loaded: true,\n                    issueStatus: RB.BaseComment.STATE_DROPPED,\n                    parentObject: parentObject,\n                });\n\n                const data = model.toJSON();\n                expect(data.issue_status).toBe(RB.BaseComment.STATE_DROPPED);\n            });\n        });\n\n        describe('richText field', function() {\n            it('With true', function() {\n                model.set('richText', true);\n                const data = model.toJSON();\n                expect(data.text_type).toBe('markdown');\n            });\n\n            it('With false', function() {\n                model.set('richText', false);\n                const data = model.toJSON();\n                expect(data.text_type).toBe('plain');\n            });\n        });\n\n        describe('text field', function() {\n            it('With value', function() {\n                model.set('text', 'foo');\n                const data = model.toJSON();\n                expect(data.text).toBe('foo');\n            });\n        });\n    });\n\n    describe('validate', function() {\n        describe('issueState', function() {\n            it('STATE_DROPPED', function() {\n                expect(model.validate({\n                    issueStatus: RB.BaseComment.STATE_DROPPED,\n                })).toBe(undefined);\n            });\n\n            it('STATE_OPEN', function() {\n                expect(model.validate({\n                    issueStatus: RB.BaseComment.STATE_OPEN,\n                })).toBe(undefined);\n            });\n\n            it('STATE_RESOLVED', function() {\n                expect(model.validate({\n                    issueStatus: RB.BaseComment.STATE_RESOLVED,\n                })).toBe(undefined);\n            });\n\n            it('Unset', function() {\n                expect(model.validate({\n                    issueStatus: '',\n                })).toBe(undefined);\n\n                expect(model.validate({\n                    issueStatus: undefined,\n                })).toBe(undefined);\n\n                expect(model.validate({\n                    issueStatus: null,\n                })).toBe(undefined);\n            });\n\n            it('Invalid values', function() {\n                expect(model.validate({\n                    issueStatus: 'foobar',\n                })).toBe(strings.INVALID_ISSUE_STATUS);\n            });\n        });\n\n        describe('parentObject', function() {\n            it('With value', function() {\n                expect(model.validate({\n                    parentObject: parentObject,\n                })).toBe(undefined);\n            });\n\n            it('Unset', function() {\n                expect(model.validate({\n                    parentObject: null,\n                })).toBe(RB.BaseResource.strings.UNSET_PARENT_OBJECT);\n            });\n        });\n    });\n});\n"]}