{"version":3,"sources":["reviewReplyDraftBannerViewTests.es6.js"],"names":[],"mappings":"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","file":"reviewReplyDraftBannerViewTests.js","sourcesContent":["suite('rb/reviewRequestPage/views/ReviewReplyDraftBannerView', function() {\n    let reviewReply;\n    let view;\n\n    beforeEach(function() {\n        reviewReply = new RB.ReviewReply();\n        view = new RB.ReviewRequestPage.ReviewReplyDraftBannerView({\n            model: reviewReply,\n            $floatContainer: $testsScratch,\n            reviewRequestEditor: new RB.ReviewRequestEditor({\n                reviewRequest: new RB.ReviewRequest(),\n            }),\n        });\n        view.render().$el.appendTo($testsScratch);\n    });\n\n    describe('Actions', function() {\n        it('Discard', function() {\n            spyOn(reviewReply, 'destroy');\n            view.$('.discard-button').click();\n            expect(reviewReply.destroy).toHaveBeenCalled();\n        });\n\n        it('Publish', function() {\n            spyOn(reviewReply, 'publish');\n            view.$('.publish-button').click();\n            expect(reviewReply.publish).toHaveBeenCalled();\n        });\n    });\n\n    describe('Event Handling', function() {\n        describe('Buttons', function() {\n            let $buttons;\n\n            beforeEach(function() {\n                $buttons = view.$('input');\n            });\n\n            describe('Disabled', function() {\n                it('When saving', function() {\n                    expect($buttons.prop('disabled')).toBe(false);\n                    reviewReply.trigger('saving');\n                    expect($buttons.prop('disabled')).toBe(true);\n                });\n\n                it('When destroying', function() {\n                    expect($buttons.prop('disabled')).toBe(false);\n                    reviewReply.trigger('destroying');\n                    expect($buttons.prop('disabled')).toBe(true);\n                });\n            });\n\n            describe('Enabled', function() {\n                it('When saved', function() {\n                    $buttons.prop('disabled', true);\n                    reviewReply.trigger('saved');\n                    expect($buttons.prop('disabled')).toBe(false);\n                });\n            });\n        });\n    });\n\n    describe('Publish', function() {\n        beforeEach(function() {\n            spyOn(reviewReply, 'ensureCreated').and.callFake(\n                (options, context) => options.success.call(context));\n\n            spyOn(reviewReply, 'publish');\n        });\n\n        describe('With Send E-Mail shown', function() {\n            beforeEach(function() {\n                view.remove();\n                view = new RB.ReviewRequestPage.ReviewReplyDraftBannerView({\n                    model: reviewReply,\n                    $floatContainer: $testsScratch,\n                    reviewRequestEditor: new RB.ReviewRequestEditor({\n                        reviewRequest: new RB.ReviewRequest(),\n                        showSendEmail: true\n                    })\n                });\n                view.render().$el.appendTo($testsScratch);\n            });\n\n            it('Send E-Mail true', function() {\n                $('.send-email').prop('checked', true);\n\n                $('.publish-button').click();\n\n                expect(reviewReply.publish).toHaveBeenCalled();\n                expect(reviewReply.publish.calls.argsFor(0)[0].trivial)\n                    .toBe(false);\n            });\n\n            it('Send E-Mail false', function() {\n                $('.send-email').prop('checked', false);\n\n                $('.publish-button').click();\n\n                expect(reviewReply.publish).toHaveBeenCalled();\n                expect(reviewReply.publish.calls.argsFor(0)[0].trivial)\n                    .toBe(true);\n            });\n        });\n\n        it('Without Send E-Mail shown', function() {\n            $('.publish-button').click();\n\n            expect($('.send-email').length).toEqual(0);\n            expect(reviewReply.publish).toHaveBeenCalled();\n            expect(reviewReply.publish.calls.argsFor(0)[0].trivial).toBe(false);\n        });\n    });\n});\n"]}