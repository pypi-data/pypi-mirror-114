{"version":3,"sources":["pageManagerModelTests.es6.js"],"names":[],"mappings":"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","file":"pageManagerModelTests.js","sourcesContent":["suite('rb/pages/models/PageManager', function() {\n    let pageManager;\n    let page;\n\n    beforeEach(function() {\n        pageManager = new RB.PageManager();\n        page = new Backbone.View();\n\n        spyOn(page, 'render');\n    });\n\n    describe('Instance', function() {\n        let callbacks;\n        let expectedRender;\n\n        beforeEach(function() {\n            expectedRender = false;\n\n            callbacks = {\n                cb: _page => {\n                    expect(_page).toBe(page);\n                    expect(pageManager.get('rendered')).toBe(expectedRender);\n                },\n            };\n\n            spyOn(callbacks, 'cb');\n        });\n\n        describe('Methods', function() {\n            describe('beforeReady', function() {\n                it('Without page set', function() {\n                    pageManager.beforeRender(callbacks.cb);\n                    expect(callbacks.cb).not.toHaveBeenCalled();\n\n                    pageManager.set('page', page);\n                    expect(callbacks.cb).toHaveBeenCalled();\n                });\n\n                it('With page set, not rendered', function() {\n                    pageManager.set('page', page);\n                    pageManager.set('rendered', false);\n\n                    pageManager.beforeRender(callbacks.cb);\n                    expect(callbacks.cb).toHaveBeenCalled();\n                });\n\n                it('With page set, rendered', function() {\n                    pageManager.set({\n                        page: page,\n                        rendered: true,\n                    });\n\n                    expect(() => pageManager.beforeRender(callbacks.cb))\n                        .toThrow();\n\n                    expect(callbacks.cb).not.toHaveBeenCalled();\n                });\n            });\n\n            describe('ready', function() {\n                it('Without page set', function() {\n                    pageManager.ready(callbacks.cb);\n                    expect(callbacks.cb).not.toHaveBeenCalled();\n\n                    pageManager.set('page', page);\n                    expect(pageManager.get('rendered')).toBe(true);\n                    expect(page.render).toHaveBeenCalled();\n\n                    expect(callbacks.cb).toHaveBeenCalled();\n                });\n\n                it('With page set, not rendered', function() {\n                    /* Prevent the page from rendering for this test. */\n                    spyOn(pageManager, '_renderPage');\n\n                    pageManager.set('page', page);\n                    expect(pageManager.get('rendered')).toBe(false);\n                    expect(page.render).not.toHaveBeenCalled();\n\n                    pageManager.ready(callbacks.cb);\n                    expect(callbacks.cb).not.toHaveBeenCalled();\n                });\n\n                it('With page set, rendered', function() {\n                    pageManager.set('page', page);\n                    expect(pageManager.get('rendered')).toBe(true);\n                    expect(page.render).toHaveBeenCalled();\n\n                    pageManager.ready(callbacks.cb);\n                    expect(callbacks.cb).toHaveBeenCalled();\n                });\n            });\n        });\n    });\n\n    describe('Class methods', function() {\n        let oldInstance;\n\n        beforeEach(function() {\n            oldInstance = RB.PageManager.instance;\n            RB.PageManager.instance = pageManager;\n        });\n\n        afterEach(function() {\n            RB.PageManager.instance = oldInstance;\n        });\n\n        it('beforeRender', function() {\n            spyOn(RB.PageManager.instance, 'beforeRender');\n            RB.PageManager.beforeRender(1, 2);\n            expect(RB.PageManager.instance.beforeRender)\n                .toHaveBeenCalledWith(1, 2);\n        });\n\n        it('ready', function() {\n            spyOn(RB.PageManager.instance, 'ready');\n            RB.PageManager.ready(1, 2);\n            expect(RB.PageManager.instance.ready)\n                .toHaveBeenCalledWith(1, 2);\n        });\n\n        it('setPage', function() {\n            const page = new Backbone.View();\n            RB.PageManager.setPage(page);\n            expect(pageManager.get('page')).toBe(page);\n        });\n\n        it('getPage', function() {\n            const page = new Backbone.View();\n            pageManager.set('page', page);\n            expect(RB.PageManager.getPage()).toBe(page);\n        });\n    });\n});\n"]}