{"version":3,"sources":["keyBindingUtilsTests.es6.js"],"names":[],"mappings":"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","file":"keyBindingUtilsTests.js","sourcesContent":["suite('rb/utils/keyBindingUtils', function() {\n    describe('KeyBindingsMixin', function() {\n        function sendKeyPress($el, keyCode, handled) {\n            const evt = jQuery.Event('keypress');\n            evt.which = keyCode.charCodeAt(0);\n            $el.trigger(evt);\n\n            expect(evt.isDefaultPrevented()).toBe(handled);\n            expect(evt.isPropagationStopped()).toBe(handled);\n        }\n\n        it('Registered on create', function() {\n            const MyView = Backbone.View.extend({\n                keyBindings: {},\n            });\n            _.extend(MyView.prototype, RB.KeyBindingsMixin);\n\n            spyOn(MyView.prototype, 'delegateKeyBindings');\n\n            this._view = new MyView();\n            expect(MyView.prototype.delegateKeyBindings).toHaveBeenCalled();\n        });\n\n        it('Unregistered on undelegateEvents', function() {\n            const MyView = Backbone.View.extend({\n                keyBindings: {},\n            });\n            _.extend(MyView.prototype, RB.KeyBindingsMixin);\n\n            const view = new MyView();\n            spyOn(MyView.prototype, 'undelegateKeyBindings');\n\n            view.undelegateEvents();\n            expect(MyView.prototype.undelegateKeyBindings).toHaveBeenCalled();\n        });\n\n        it('Keys to function name', function() {\n            const MyView = Backbone.View.extend({\n                keyBindings: {\n                    'abc': 'myFunc1',\n                    'def': 'myFunc2',\n                },\n\n                myFunc1: function() {},\n                myFunc2: function() {},\n            });\n            _.extend(MyView.prototype, RB.KeyBindingsMixin);\n\n            const view = new MyView();\n            view.render().$el.appendTo($testsScratch);\n\n            spyOn(view, 'myFunc1');\n            spyOn(view, 'myFunc2');\n\n            sendKeyPress(view.$el, 'e', true);\n\n            expect(view.myFunc1).not.toHaveBeenCalled();\n            expect(view.myFunc2).toHaveBeenCalled();\n        });\n\n        it('Keys to function', function() {\n            const MyView = Backbone.View.extend({\n                keyBindings: {\n                    'abc': function() {},\n                    'def': function() {},\n                }\n            });\n            _.extend(MyView.prototype, RB.KeyBindingsMixin);\n\n            const view = new MyView();\n            view.render().$el.appendTo($testsScratch);\n\n            spyOn(view.keyBindings, 'abc');\n            spyOn(view.keyBindings, 'def');\n\n            sendKeyPress(view.$el, 'b', true);\n\n            expect(view.keyBindings.abc).toHaveBeenCalled();\n            expect(view.keyBindings.def).not.toHaveBeenCalled();\n        });\n\n        it('Unmatched keys', function() {\n            const MyView = Backbone.View.extend({\n                keyBindings: {\n                    'abc': function() {},\n                    'def': function() {},\n                }\n            });\n            _.extend(MyView.prototype, RB.KeyBindingsMixin);\n\n            const view = new MyView();\n            view.render().$el.appendTo($testsScratch);\n\n            spyOn(view.keyBindings, 'abc');\n            spyOn(view.keyBindings, 'def');\n\n            sendKeyPress(view.$el, '!', false);\n\n            expect(view.keyBindings.abc).not.toHaveBeenCalled();\n            expect(view.keyBindings.def).not.toHaveBeenCalled();\n        });\n    });\n});\n"]}