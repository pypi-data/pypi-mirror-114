{"version":3,"sources":["dashboardModel.es6.js"],"names":[],"mappings":";;AAAA;;;;;;AAMA,GAAG,SAAH,GAAe,GAAG,YAAH,CAAgB,MAAhB,CAAuB;AAClC,mBAAe,GAAG,aADgB;;AAGlC;;;;;;;;;;;;;;;;;AAiBA,uBApBkC,+BAoBd,OApBc,EAoBL;AACzB,YAAM,iBAAiB,KAAK,SAAL,CAAe,KAAf,EAAvB;AACA,YAAM,YAAY,EAAlB;AACA,YAAM,WAAW,EAAjB;;AAEA,iBAAS,SAAT,GAAqB;AACjB,gBAAI,eAAe,MAAf,KAA0B,CAA9B,EAAiC;AAC7B,qBAAK,SAAL,CAAe,KAAf;AACA,qBAAK,OAAL,CAAa,SAAb;AACA,wBAAQ,MAAR,CAAe,SAAf,EAA0B,QAA1B;AACA;AACH;;AAED,gBAAM,gBAAgB,eAAe,KAAf,EAAtB;;AAEA,0BAAc,KAAd,CAAoB;AAChB,sBAAM,QAAQ,SADE;AAEhB,yBAAS;AAAA,2BAAM,UAAU,IAAV,CAAe,aAAf,CAAN;AAAA,iBAFO;AAGhB,uBAAO;AAAA,2BAAM,SAAS,IAAT,CAAc,aAAd,CAAN;AAAA,iBAHS;AAIhB,0BAAU,UAAU,IAAV,CAAe,IAAf;AAJM,aAApB;AAMH;;AAED,kBAAU,IAAV,CAAe,IAAf;AACH,KA5CiC;;;AA8ClC;;;;;;;;;;;;AAYA,oBA1DkC,4BA0DjB,cA1DiB,EA0DD;AAC7B,YAAM,iBAAiB,KAAK,SAAL,CAAe,KAAf,EAAvB;AACA,YAAM,YAAY,EAAlB;AACA,YAAM,WAAW,EAAjB;;AAEA,iBAAS,QAAT,GAAoB;AAAA;;AAChB,gBAAI,eAAe,MAAf,KAA0B,CAA9B,EAAiC;AAC7B,qBAAK,SAAL,CAAe,KAAf;AACA,qBAAK,OAAL,CAAa,SAAb;AACA;AACH;;AAED,gBAAM,gBAAgB,eAAe,KAAf,EAAtB;;AAEA,2BACI,aADJ,EAEI;AACI,yBAAS,mBAAM;AACX,8BAAU,IAAV,CAAe,aAAf;AACA,6BAAS,IAAT,CAAc,KAAd;AACH,iBAJL;AAKI,uBAAO,iBAAM;AACT,6BAAS,IAAT,CAAc,aAAd;AACA,6BAAS,IAAT,CAAc,KAAd;AACH;AARL,aAFJ;AAYH;;AAED,iBAAS,IAAT,CAAc,IAAd;AACH;AAvFiC,CAAvB,CAAf","file":"dashboardModel.js","sourcesContent":["/**\n * Models the dashboard and its operations.\n *\n * This will keep track of any selected review requests, and can\n * perform operations on them.\n */\nRB.Dashboard = RB.DatagridPage.extend({\n    rowObjectType: RB.ReviewRequest,\n\n    /**\n     * Close all selected review requests.\n     *\n     * This will keep track of all the successes and failures and report\n     * them back to the caller once completed.\n     *\n     * Args:\n     *     options (object):\n     *         Options for the operation.\n     *\n     * Option Args:\n     *     closeType (string):\n     *         The close type to use (submitted or discarded).\n     *\n     *     onDone (function):\n     *         A function to call when the operation is complete.\n     */\n    closeReviewRequests(options) {\n        const reviewRequests = this.selection.clone();\n        const successes = [];\n        const failures = [];\n\n        function closeNext() {\n            if (reviewRequests.length === 0) {\n                this.selection.reset();\n                this.trigger('refresh');\n                options.onDone(successes, failures);\n                return;\n            }\n\n            const reviewRequest = reviewRequests.shift();\n\n            reviewRequest.close({\n                type: options.closeType,\n                success: () => successes.push(reviewRequest),\n                error: () => failures.push(reviewRequest),\n                complete: closeNext.bind(this),\n            });\n        }\n\n        closeNext.call(this);\n    },\n\n    /**\n     * Update the visibility of the selected review requests.\n     *\n     * This expects to be passed in a properly bound function (either\n     * addImmediately or removeImmediately) on either archivedReviewRequests or\n     * mutedReviewRequests. This will keep track of all the successes and\n     * failures, reporting them back to the caller.\n     *\n     * Args:\n     *     visibilityFunc (function):\n     *         The function to call for each review request.\n     */\n    updateVisibility(visibilityFunc) {\n        const reviewRequests = this.selection.clone();\n        const successes = [];\n        const failures = [];\n\n        function hideNext() {\n            if (reviewRequests.length === 0) {\n                this.selection.reset();\n                this.trigger('refresh');\n                return;\n            }\n\n            const reviewRequest = reviewRequests.shift();\n\n            visibilityFunc(\n                reviewRequest,\n                {\n                    success: () => {\n                        successes.push(reviewRequest);\n                        hideNext.call(this);\n                    },\n                    error: () => {\n                        failures.push(reviewRequest);\n                        hideNext.call(this);\n                    },\n                });\n        }\n\n        hideNext.call(this);\n    },\n});\n"]}