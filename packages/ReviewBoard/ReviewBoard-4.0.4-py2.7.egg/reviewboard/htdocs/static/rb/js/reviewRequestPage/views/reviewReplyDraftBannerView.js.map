{"version":3,"sources":["reviewReplyDraftBannerView.es6.js"],"names":[],"mappings":";;AAAA;;;;;AAKA,GAAG,iBAAH,CAAqB,0BAArB,GAAkD,GAAG,kBAAH,CAAsB,MAAtB,CAA6B;AAC3E,eAAW,QADgE;;AAG3E,cAAU,EAAE,QAAF,oZAHiE;;AAoB3E,YAAQ;AACJ,iCAAyB,mBADrB;AAEJ,iCAAyB;AAFrB,KApBmE;;AAyB3E;;;;;;;AAOA,UAhC2E,oBAgClE;AAAA;;AACL,WAAG,kBAAH,CAAsB,SAAtB,CAAgC,MAAhC,CAAuC,IAAvC,CAA4C,IAA5C;;AAEA,YAAM,sBAAsB,KAAK,OAAL,CAAa,mBAAzC;;AAEA,aAAK,GAAL,CAAS,IAAT,CAAc,KAAK,QAAL,CAAc;AACxB,wDADwB;AAExB,sEAFwB;AAGxB,2CAHwB;AAIxB,2CAJwB;AAKxB,iDALwB;AAMxB,2BAAe,oBAAoB,GAApB,CAAwB,eAAxB;AANS,SAAd,CAAd;;AASA,aAAK,QAAL,CAAc,KAAK,KAAnB,EAA0B,mBAA1B,EACc;AAAA,mBAAM,MAAK,CAAL,CAAO,OAAP,EAAgB,IAAhB,CAAqB,UAArB,EAAiC,IAAjC,CAAN;AAAA,SADd;AAEA,aAAK,QAAL,CAAc,KAAK,KAAnB,EAA0B,OAA1B,EACc;AAAA,mBAAM,MAAK,CAAL,CAAO,OAAP,EAAgB,IAAhB,CAAqB,UAArB,EAAiC,KAAjC,CAAN;AAAA,SADd;AAEA,aAAK,QAAL,CAAc,KAAK,KAAnB,EAA0B,cAA1B,EACc;AAAA,mBAAa,MAAM,SAAN,CAAb;AAAA,SADd;;AAGA,eAAO,IAAP;AACH,KAtD0E;;;AAwD3E;;;;;AAKA,qBA7D2E,+BA6DvD;AAChB,YAAM,aAAa,KAAK,CAAL,CAAO,aAAP,CAAnB;;AAEA,aAAK,KAAL,CAAW,OAAX,CAAmB;AACf,qBAAS,WAAW,MAAX,KAAsB,CAAtB,IAA2B,CAAC,WAAW,EAAX,CAAc,UAAd;AADtB,SAAnB,EAEG,IAFH;AAGH,KAnE0E;;;AAqE3E;;;;;AAKA,qBA1E2E,+BA0EvD;AAChB,aAAK,KAAL,CAAW,OAAX;AACH;AA5E0E,CAA7B,CAAlD","file":"reviewReplyDraftBannerView.js","sourcesContent":["/**\n * A banner that represents a pending reply to a review.\n *\n * The banner offers actions for publishing and discarding the review.\n */\nRB.ReviewRequestPage.ReviewReplyDraftBannerView = RB.FloatingBannerView.extend({\n    className: 'banner',\n\n    template: _.template(dedent`\n        <h1><%- draftText %></h1>\n        <p><%- reminderText %></p>\n        <span class=\"banner-actions\">\n         <input type=\"button\" value=\"<%- publishText %>\"\n                class=\"publish-button\" />\n         <input type=\"button\" value=\"<%- discardText %>\"\n                class=\"discard-button\" />\n        </span>\n        <% if (showSendEmail) { %>\n         <label>\n          <input type=\"checkbox\" class=\"send-email\" checked />\n          <%- sendEmailText %>\n        </label>\n        <% } %>\n    `),\n\n    events: {\n        'click .publish-button': '_onPublishClicked',\n        'click .discard-button': '_onDiscardClicked',\n    },\n\n    /**\n     * Render the banner.\n     *\n     * Returns:\n     *     RB.ReviewRequestPage.ReviewReplyDraftBannerView:\n     *     This object, for chaining.\n     */\n    render() {\n        RB.FloatingBannerView.prototype.render.call(this);\n\n        const reviewRequestEditor = this.options.reviewRequestEditor;\n\n        this.$el.html(this.template({\n            draftText: gettext('This reply is a draft.'),\n            reminderText: gettext('Be sure to publish when finished.'),\n            publishText: gettext('Publish'),\n            discardText: gettext('Discard'),\n            sendEmailText: gettext('Send E-Mail'),\n            showSendEmail: reviewRequestEditor.get('showSendEmail'),\n        }));\n\n        this.listenTo(this.model, 'saving destroying',\n                      () => this.$('input').prop('disabled', true));\n        this.listenTo(this.model, 'saved',\n                      () => this.$('input').prop('disabled', false));\n        this.listenTo(this.model, 'publishError',\n                      errorText => alert(errorText));\n\n        return this;\n    },\n\n    /**\n     * Handler for when Publish is clicked.\n     *\n     * Publishes the reply.\n     */\n    _onPublishClicked() {\n        const $sendEmail = this.$('.send-email');\n\n        this.model.publish({\n            trivial: $sendEmail.length === 1 && !$sendEmail.is(':checked'),\n        }, this);\n    },\n\n    /**\n     * Handler for when Discard is clicked.\n     *\n     * Discards the reply.\n     */\n    _onDiscardClicked() {\n        this.model.destroy();\n    },\n});\n"]}