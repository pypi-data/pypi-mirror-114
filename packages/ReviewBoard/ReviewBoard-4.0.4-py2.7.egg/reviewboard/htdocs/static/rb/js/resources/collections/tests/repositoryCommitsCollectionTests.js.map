{"version":3,"sources":["repositoryCommitsCollectionTests.es6.js"],"names":[],"mappings":";;AAAA,MAAM,4CAAN,EAAoD,YAAW;AAC3D,QAAM,MAAM,gCAAZ;AACA,QAAM,QAAQ,0CAAd;AACA,QAAI,mBAAJ;;AAEA,eAAW,YAAW;AAClB,qBAAa,IAAI,GAAG,iBAAP,CAAyB,EAAzB,EAA6B;AACtC,qBAAS,GAD6B;AAEtC,mBAAO;AAF+B,SAA7B,CAAb;AAIH,KALD;;AAOA,aAAS,SAAT,EAAoB,YAAW;AAC3B,WAAG,OAAH,EAAY,YAAW;AACnB,kBAAM,CAAN,EAAS,MAAT,EAAiB,GAAjB,CAAqB,QAArB,CAA8B,mBAAW;AACrC,uBAAO,QAAQ,GAAf,EAAoB,IAApB,CAA4B,GAA5B,eAAyC,KAAzC;AACA,uBAAO,QAAQ,IAAf,EAAqB,IAArB,CAA0B,KAA1B;;AAEA,wBAAQ,OAAR,CAAgB;AACZ,0BAAM,IADM;AAEZ,6BAAS,CACL;AACI,qCAAa,mBADjB;AAEI,8BAAM,sBAFV;AAGI,4BAAI,0CAHR;AAII,iCAAS,8BAJb;AAKI,gCAAQ,0CALZ;AAMI,4CAAoB;AANxB,qBADK,EASL;AACI,qCAAa,mBADjB;AAEI,8BAAM,sBAFV;AAGI,4BAAI,0CAHR;AAII,iCAAS,kCACA,wBALb;AAMI,gCAAQ,0CANZ;AAOI,4CAAoB;AAPxB,qBATK,EAkBL;AACI,qCAAa,mBADjB;AAEI,8BAAM,sBAFV;AAGI,4BAAI,0CAHR;AAII,iCAAS,CACL,kCADK,EAEL,4CAFK,EAGL,sCAHK,EAIL,8CAJK,EAKL,2CALK,EAML,2CANK,EAOL,mBAPK,EAOgB,IAPhB,CAOqB,EAPrB,CAJb;AAYI,gCAAQ,EAZZ;AAaI,4CAAoB;AAbxB,qBAlBK;AAFG,iBAAhB;AAsCH,aA1CD;;AA4CA,uBAAW,KAAX;;AAEA,mBAAO,EAAE,IAAT,EAAe,gBAAf;AACA,mBAAO,WAAW,MAAlB,EAA0B,IAA1B,CAA+B,CAA/B;AACA,mBAAO,WAAW,EAAX,CAAc,CAAd,EAAiB,GAAjB,CAAqB,YAArB,CAAP,EACK,IADL,CACU,mBADV;AAEA,mBAAO,WAAW,EAAX,CAAc,CAAd,EAAiB,GAAjB,CAAqB,MAArB,EAA6B,WAA7B,EAAP,EAAmD,IAAnD,CAAwD,EAAxD;AACA,mBAAO,WAAW,EAAX,CAAc,CAAd,EAAiB,GAAjB,CAAqB,SAArB,CAAP,EACK,IADL,CACU,uDADV;AAEA,mBAAO,WAAW,EAAX,CAAc,CAAd,EAAiB,GAAjB,CAAqB,kBAArB,CAAP,EACK,IADL,CACU,6BADV;AAEH,SAxDD;;AA0DA,WAAG,KAAH,EAAU,YAAW;AACjB,mBAAO,EAAE,MAAF,CAAS,UAAT,EAAqB,KAArB,CAAP,EAAoC,IAApC,CAA4C,GAA5C,eAAyD,KAAzD;AACH,SAFD;AAGH,KA9DD;AA+DH,CA3ED","file":"repositoryCommitsCollectionTests.js","sourcesContent":["suite('rb/resources/collections/RepositoryCommits', function() {\n    const url = '/api/repositories/123/commits/';\n    const start = '859d4e148ce3ce60bbda6622cdbe5c2c2f8d9817';\n    let collection;\n\n    beforeEach(function() {\n        collection = new RB.RepositoryCommits([], {\n            urlBase: url,\n            start: start,\n        });\n    });\n\n    describe('Methods', function() {\n        it('fetch', function() {\n            spyOn($, 'ajax').and.callFake(request => {\n                expect(request.url).toBe(`${url}?start=${start}`);\n                expect(request.type).toBe('GET');\n\n                request.success({\n                    stat: 'ok',\n                    commits: [\n                        {\n                            author_name: 'Christian Hammond',\n                            date: '2013-06-25T23:31:22Z',\n                            id: '859d4e148ce3ce60bbda6622cdbe5c2c2f8d9817',\n                            message: \"Merge branch 'release-1.7.x'\",\n                            parent: '92463764015ef463b4b6d1a1825fee7aeec8cb15',\n                            review_request_url: '',\n                        },\n                        {\n                            author_name: 'Christian Hammond',\n                            date: '2013-06-25T23:30:59Z',\n                            id: '92463764015ef463b4b6d1a1825fee7aeec8cb15',\n                            message: 'Fixed the bug number for the ' +\n                                     'blacktriangledown bug.',\n                            parent: '84c730c7823b653a5bbcc007188d5c85a7c4ac58',\n                            review_request_url: 'http://example.com/r/18274/',\n                        },\n                        {\n                            author_name: 'Christian Hammond',\n                            date: '2013-06-25T22:53:32Z',\n                            id: '84c730c7823b653a5bbcc007188d5c85a7c4ac58',\n                            message: [\n                                \"Don't expose child resources in \",\n                                'ValidateDiffResource.\\n\\nFor convenience, ',\n                                'ValidateDiffResource inherited from ',\n                                'DiffResource.\\nThis brought along the child ',\n                                \"resources, which weren't valid to have.\\n\",\n                                'That ended up breaking docs, which tried ',\n                                'to traverse them.'].join(''),\n                            parent: '',\n                            review_request_url: '',\n                        },\n                    ],\n                });\n\n            });\n\n            collection.fetch();\n\n            expect($.ajax).toHaveBeenCalled();\n            expect(collection.length).toBe(3);\n            expect(collection.at(0).get('authorName'))\n                .toBe('Christian Hammond');\n            expect(collection.at(1).get('date').getUTCHours()).toBe(23);\n            expect(collection.at(2).get('summary'))\n                .toBe(\"Don't expose child resources in ValidateDiffResource.\");\n            expect(collection.at(1).get('reviewRequestURL'))\n                .toBe('http://example.com/r/18274/');\n        });\n\n        it('url', function() {\n            expect(_.result(collection, 'url')).toBe(`${url}?start=${start}`);\n        });\n    });\n});\n"]}