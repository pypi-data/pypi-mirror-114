{"version":3,"sources":["repositorySelectionViewTests.es6.js"],"names":[],"mappings":"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","file":"repositorySelectionViewTests.js","sourcesContent":["suite('rb/newReviewRequest/views/RepositorySelectionView', function() {\n    let collection;\n    let view;\n\n    beforeEach(function() {\n        collection = new Backbone.Collection([\n            { name: 'Bitbucket Test' },\n            { name: 'GitHub Test' },\n            { name: 'GitLab Test' },\n            { name: 'Local Git Test' },\n        ], {\n            model: RB.Repository,\n        });\n\n        view = new RB.RepositorySelectionView({\n            collection: collection,\n        });\n    });\n\n    describe('Rendering', function() {\n        it('With items', function() {\n            view.render();\n            const children = view.$el.find('.repository');\n\n            expect(children.length).toBe(collection.models.length);\n\n            for (let i = 0; i < children.length; i++) {\n                const name = collection.models[i].get('name');\n                expect($(children[i]).text().strip()).toBe(name);\n            }\n        });\n    });\n\n    describe('Filtering', function() {\n        let $items;\n        let $searchBox;\n\n        function setSearchTerm(term) {\n            $searchBox\n                .val(term)\n                .trigger('input');\n        }\n\n        function checkVisibility(i, visible) {\n            expect($items.eq(i).is(':visible')).toBe(visible);\n        }\n\n        beforeEach(function() {\n            view.render().$el.appendTo($testsScratch);\n\n            $items = view.$el.find('.repository');\n            $searchBox = view.$el.find('.rb-c-search-field__input');\n\n            expect($items.length).toBe(4);\n            expect($searchBox.length).toBe(1);\n        });\n\n        it('No search term', function() {\n            $items.each((i, el) => {\n                checkVisibility(i, true);\n            });\n        });\n\n        it('Search term set and match', function() {\n            setSearchTerm('Git');\n\n            checkVisibility(0, false);\n            checkVisibility(1, true);\n            checkVisibility(2, true);\n            checkVisibility(3, true);\n        });\n\n        it('Search term set and no match', function() {\n            setSearchTerm('XXX');\n\n            $items.each((i, el) => {\n                checkVisibility(i, false);\n            });\n        });\n\n        it('Search term removed', function() {\n            setSearchTerm('Git');\n\n            checkVisibility(0, false);\n            checkVisibility(1, true);\n            checkVisibility(2, true);\n            checkVisibility(3, true);\n\n            setSearchTerm('');\n\n            $items.each((i, el) => {\n                checkVisibility(i, true);\n            });\n        });\n    });\n\n    describe('Selected event', function() {\n        it('When clicked', function() {\n            let handlerCalled = false;\n\n            view.render();\n            view.on('selected', repository => {\n                expect(repository.get('name')).toBe('GitHub Test');\n                handlerCalled = true;\n            });\n\n            const children = view.$el.find('.repository');\n            $(children[1]).click();\n\n            expect(handlerCalled).toBe(true);\n        });\n    });\n});\n"]}