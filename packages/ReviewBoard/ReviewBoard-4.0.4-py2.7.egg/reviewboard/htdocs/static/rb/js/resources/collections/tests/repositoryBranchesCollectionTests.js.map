{"version":3,"sources":["repositoryBranchesCollectionTests.es6.js"],"names":[],"mappings":";;AAAA,MAAM,6CAAN,EAAqD,YAAW;AAC5D,QAAI,mBAAJ;;AAEA,eAAW,YAAW;AAClB,qBAAa,IAAI,GAAG,kBAAP,EAAb;AACA,mBAAW,GAAX,GAAiB,iCAAjB;AACH,KAHD;;AAKA,aAAS,SAAT,EAAoB,YAAW;AAC3B,WAAG,OAAH,EAAY,YAAW;AACnB,kBAAM,CAAN,EAAS,MAAT,EAAiB,GAAjB,CAAqB,QAArB,CAA8B,mBAAW;AACrC,uBAAO,QAAQ,GAAf,EACK,IADL,CACU,iCADV;AAEA,uBAAO,QAAQ,IAAf,EAAqB,IAArB,CAA0B,KAA1B;;AAEA,wBAAQ,OAAR,CAAgB;AACZ,0BAAM,IADM;AAEZ,8BAAU,CACN;AACI,8BAAM,QADV;AAEI,gCAAQ,0CAFZ;AAGI,mCAAW;AAHf,qBADM,EAMN;AACI,8BAAM,eADV;AAEI,gCAAQ,0CAFZ;AAGI,mCAAW;AAHf,qBANM,EAWN;AACI,8BAAM,eADV;AAEI,gCAAQ,0CAFZ;AAGI,mCAAW;AAHf,qBAXM;AAFE,iBAAhB;AAoBH,aAzBD;;AA2BA,uBAAW,KAAX;;AAEA,mBAAO,EAAE,IAAT,EAAe,gBAAf;AACA,mBAAO,WAAW,MAAlB,EAA0B,IAA1B,CAA+B,CAA/B;AACA,mBAAO,WAAW,EAAX,CAAc,CAAd,EAAiB,GAAjB,CAAqB,MAArB,CAAP,EAAqC,IAArC,CAA0C,QAA1C;AACA,mBAAO,WAAW,EAAX,CAAc,CAAd,EAAiB,GAAjB,CAAqB,QAArB,CAAP,EACK,IADL,CACU,0CADV;AAEA,mBAAO,WAAW,EAAX,CAAc,CAAd,EAAiB,GAAjB,CAAqB,WAArB,CAAP,EAA0C,IAA1C,CAA+C,KAA/C;;AAEA,mBAAO,WAAW,MAAX,CACH,UAAC,IAAD,EAAO,IAAP;AAAA,uBAAiB,OAAO,KAAK,GAAL,CAAS,WAAT,CAAP,GAA+B,CAA/B,GAAmC,CAApD;AAAA,aADG,EACqD,CADrD,CAAP,EAEK,IAFL,CAEU,CAFV;AAGH,SAxCD;AAyCH,KA1CD;AA2CH,CAnDD","file":"repositoryBranchesCollectionTests.js","sourcesContent":["suite('rb/resources/collections/RepositoryBranches', function() {\n    let collection;\n\n    beforeEach(function() {\n        collection = new RB.RepositoryBranches();\n        collection.url = '/api/repositories/123/branches/';\n    });\n\n    describe('Methods', function() {\n        it('fetch', function() {\n            spyOn($, 'ajax').and.callFake(request => {\n                expect(request.url)\n                    .toBe('/api/repositories/123/branches/');\n                expect(request.type).toBe('GET');\n\n                request.success({\n                    stat: 'ok',\n                    branches: [\n                        {\n                            name: 'master',\n                            commit: '859d4e148ce3ce60bbda6622cdbe5c2c2f8d9817',\n                            'default': true,\n                        },\n                        {\n                            name: 'release-1.7.x',\n                            commit: '92463764015ef463b4b6d1a1825fee7aeec8cb15',\n                            'default': false,\n                        },\n                        {\n                            name: 'release-1.6.x',\n                            commit: 'a15d0e635064a2e1929ce1bf3bc8d4aa65738b64',\n                            'default': false,\n                        },\n                    ],\n                });\n            });\n\n            collection.fetch();\n\n            expect($.ajax).toHaveBeenCalled();\n            expect(collection.length).toBe(3);\n            expect(collection.at(0).get('name')).toBe('master');\n            expect(collection.at(1).get('commit'))\n                .toBe('92463764015ef463b4b6d1a1825fee7aeec8cb15');\n            expect(collection.at(2).get('isDefault')).toBe(false);\n\n            expect(collection.reduce(\n                (memo, item) => (memo + item.get('isDefault') ? 1 : 0), 0))\n                .toBe(1);\n        });\n    });\n});\n"]}