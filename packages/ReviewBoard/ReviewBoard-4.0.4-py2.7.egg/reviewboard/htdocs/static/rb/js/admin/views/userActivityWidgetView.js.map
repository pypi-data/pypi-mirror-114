{"version":3,"sources":["userActivityWidgetView.es6.js"],"names":[],"mappings":";;AAAA;;;;;;;AAOA,GAAG,KAAH,CAAS,sBAAT,GAAkC,GAAG,KAAH,CAAS,UAAT,CAAoB,MAApB,CAA2B;AACzD,cAAU,EAAE,QAAF,6LAD+C;;AAQzD;;;;;;AAMA,gBAdyD,0BAc1C;AACX,aAAK,QAAL,CAAc,IAAd,CAAmB,KAAK,QAAL,CAAc;AAC7B,wBAAY,KAAK,KAAL,CAAW,GAAX,CAAe,OAAf,CADiB;AAE7B;AAF6B,SAAd,CAAnB;;AAKA,aAAK,OAAL,GAAe,KAAK,CAAL,CAAO,yCAAP,CAAf;;AAEA,aAAK,SAAL;AACH,KAvBwD;;;AAyBzD;;;;;AAKA,cA9ByD,wBA8B5C;AACT,aAAK,SAAL;AACH,KAhCwD;;;AAkCzD;;;AAGA,aArCyD,uBAqC7C;AACR,YAAM,QAAQ,KAAK,KAAnB;AACA,YAAM,MAAM,MAAM,GAAN,CAAU,KAAV,CAAZ;AACA,YAAM,YAAY,MAAM,GAAN,CAAU,WAAV,CAAlB;AACA,YAAM,aAAa,MAAM,GAAN,CAAU,YAAV,CAAnB;AACA,YAAM,YAAY,MAAM,GAAN,CAAU,WAAV,CAAlB;AACA,YAAM,aAAa,MAAM,GAAN,CAAU,YAAV,CAAnB;;AAEA,UAAE,IAAF,CACI,KAAK,OADT,EAEI,CACI;AACI,kBAAM,GADV;AAEI,mBAAO,oCACY,CAAC,GAAD,CADZ;AAFX,SADJ,EAMI;AACI,kBAAM,SADV;AAEI,mBAAO,wCACY,CAAC,SAAD,CADZ;AAFX,SANJ,EAWI;AACI,kBAAM,UADV;AAEI,mBAAO,yCACY,CAAC,UAAD,CADZ;AAFX,SAXJ,EAgBI;AACI,kBAAM,SADV;AAEI,mBAAO,yCACY,CAAC,SAAD,CADZ;AAFX,SAhBJ,EAqBI;AACI,kBAAM,UADV;AAEI,mBAAO,yCACY,CAAC,UAAD,CADZ;AAFX,SArBJ,CAFJ,EA6BI;AACI,oBAAQ;AACJ,qBAAK;AACD,0BAAM,IADL;AAED,2BAAO;AACH,8BAAM,IADH;AAEH,gCAAQ,CAFL;AAGH,oCAAY;AACR,qCAAS;AADD,yBAHT;AAMH,mCAAW,mBAAC,KAAD,EAAQ,MAAR;AAAA,6CACC,KAAK,KAAL,CAAW,OAAO,OAAlB,CADD;AAAA;AANR;AAFN;AADD;AADZ,SA7BJ;;AA+CA,aAAK,OAAL,CAAa,aAAb;AACH;AA7FwD,CAA3B,CAAlC","file":"userActivityWidgetView.js","sourcesContent":["/**\n * Displays stats on how often users have logged in or used Review Board.\n *\n * This is displayed as a pie graph, with a legend alongside it breaking\n * down the activity into 1-6 day, 7-29 day, 30-59 day, 60-89 day, and 90+\n * day ranges.\n */\nRB.Admin.UserActivityWidgetView = RB.Admin.WidgetView.extend({\n    template: _.template(dedent`\n        <div class=\"rb-c-admin-user-activity-widget__chart\"></div>\n        <div class=\"rb-c-admin-user-activity-widget__user-total\">\n         <%- userTotalLabel %>: <strong><%- totalUsers %></strong>\n        </div>\n    `),\n\n    /**\n     * Render the widget.\n     *\n     * This will build the basic structure of the widget's content and\n     * then plot the chart.\n     */\n    renderWidget() {\n        this.$content.html(this.template({\n            totalUsers: this.model.get('total'),\n            userTotalLabel: gettext('Total Users'),\n        }));\n\n        this._$chart = this.$('.rb-c-admin-user-activity-widget__chart');\n\n        this._plotData();\n    },\n\n    /**\n     * Handle updates to the size of the widget.\n     *\n     * This will re-render the chart for the new size.\n     */\n    updateSize() {\n        this._plotData();\n    },\n\n    /**\n     * Plot user activity into a chart.\n     */\n    _plotData() {\n        const model = this.model;\n        const now = model.get('now');\n        const sevenDays = model.get('sevenDays');\n        const thirtyDays = model.get('thirtyDays');\n        const sixtyDays = model.get('sixtyDays');\n        const ninetyDays = model.get('ninetyDays');\n\n        $.plot(\n            this._$chart,\n            [\n                {\n                    data: now,\n                    label: interpolate(gettext('Active (%s)'),\n                                       [now]),\n                },\n                {\n                    data: sevenDays,\n                    label: interpolate(gettext('7 days ago (%s)'),\n                                       [sevenDays]),\n                },\n                {\n                    data: thirtyDays,\n                    label: interpolate(gettext('30 days ago (%s)'),\n                                       [thirtyDays]),\n                },\n                {\n                    data: sixtyDays,\n                    label: interpolate(gettext('60 days ago (%s)'),\n                                       [sixtyDays]),\n                },\n                {\n                    data: ninetyDays,\n                    label: interpolate(gettext('90 days ago (%s)'),\n                                       [ninetyDays]),\n                },\n            ],\n            {\n                series: {\n                    pie: {\n                        show: true,\n                        label: {\n                            show: true,\n                            radius: 1,\n                            background: {\n                                opacity: 0.8,\n                            },\n                            formatter: (label, series) =>\n                                `<div>${Math.round(series.percent)}%</div>`,\n                        },\n                    },\n                },\n            }\n        );\n\n        this.trigger('sizeChanged');\n    },\n});\n"]}