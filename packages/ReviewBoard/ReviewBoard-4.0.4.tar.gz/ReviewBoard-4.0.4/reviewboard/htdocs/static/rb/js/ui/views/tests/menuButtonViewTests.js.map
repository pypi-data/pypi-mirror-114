{"version":3,"sources":["menuButtonViewTests.es6.js"],"names":[],"mappings":"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","file":"menuButtonViewTests.js","sourcesContent":["suite('rb/ui/views/MenuButtonView', function() {\n    describe('Rendering', function() {\n        it('With primary button', function() {\n            const view = new RB.MenuButtonView({\n                ariaMenuLabel: 'Test ARIA label',\n                menuItems: [\n                    {text: 'Item 1'},\n                    {text: 'Item 2'},\n                    {text: 'Item 3'},\n                ],\n                onPrimaryButtonClick: () => {},\n                text: 'Button label',\n            });\n            view.render();\n\n            expect(view.el).toHaveClass('rb-c-menu-button');\n            expect(view.$el.attr('role')).toBe('group');\n            expect(view.$primaryButton.length).toBe(1);\n\n            const $primaryButton = view.$('.rb-c-menu-button__primary');\n            expect($primaryButton.length).toBe(1);\n\n            const $toggleButton = view.$('.rb-c-menu-button__toggle');\n            expect($toggleButton.length).toBe(1);\n            expect($toggleButton[0].id)\n                .toBe(view.menu.$el.attr('aria-labelledby'));\n            expect($toggleButton.attr('aria-label')).toBe('Test ARIA label');\n            expect($toggleButton.children()[0])\n                .toHaveClass('rb-icon-dropdown-arrow');\n\n            expect(view.menu.el.children.length).toBe(3);\n        });\n\n        it('Without primary button', function() {\n            const view = new RB.MenuButtonView({\n                ariaMenuLabel: 'Test ARIA label',\n                menuItems: [\n                    {text: 'Item 1'},\n                    {text: 'Item 2'},\n                ],\n                text: 'Button label',\n            });\n            view.render();\n\n            expect(view.el).toHaveClass('rb-c-menu-button');\n            expect(view.$el.attr('role')).toBe('group');\n            expect(view.$primaryButton).toBeNull();\n\n            const $primaryButton = view.$('.rb-c-menu-button__primary');\n            expect($primaryButton.length).toBe(0);\n\n            const $toggleButton = view.$('.rb-c-menu-button__toggle');\n            expect($toggleButton.length).toBe(1);\n            expect($toggleButton[0].id)\n                .toBe(view.menu.$el.attr('aria-labelledby'));\n            expect($toggleButton.attr('aria-label')).toBeUndefined();\n            expect($toggleButton.text().trim()).toBe('Button label');\n            expect($toggleButton.children()[0])\n                .toHaveClass('rb-icon-dropdown-arrow');\n\n            expect(view.menu.el.children.length).toBe(2);\n        });\n    });\n\n    describe('Events', function() {\n        let view;\n\n        function sendDropDownButtonEvent(name, options) {\n            view._$dropDownButton.trigger($.Event(name, options));\n        }\n\n        function sendKeyDown(keyCode) {\n            sendDropDownButtonEvent('keydown', {\n                which: keyCode,\n            });\n        }\n\n        beforeEach(function() {\n            view = new RB.MenuButtonView();\n            view.render();\n\n            /* Don't let this override any state we set. */\n            spyOn(view, '_updateMenuPosition');\n        });\n\n        describe('keydown', function() {\n            function openMenuTests(keyCode) {\n                it('With openDirection=up', function() {\n                    view._openDirection = 'up';\n                    spyOn(view.menu, 'focusLastItem');\n\n                    sendKeyDown(keyCode);\n\n                    expect(view.menu.isOpen).toBeTrue();\n                    expect(view.menu.focusLastItem).toHaveBeenCalled();\n                });\n\n                it('With openDirection=down', function() {\n                    view._openDirection = 'down';\n                    spyOn(view.menu, 'focusFirstItem');\n\n                    sendKeyDown(keyCode);\n\n                    expect(view.menu.isOpen).toBeTrue();\n                    expect(view.menu.focusFirstItem).toHaveBeenCalled();\n                });\n            }\n\n            describe('Return key opens menu', function() {\n                openMenuTests($.ui.keyCode.RETURN);\n            });\n\n            describe('Space key opens menu', function() {\n                openMenuTests($.ui.keyCode.SPACE);\n            });\n\n            describe('Down key opens menu', function() {\n                openMenuTests($.ui.keyCode.DOWN);\n            });\n\n            describe('Up key opens menu', function() {\n                openMenuTests($.ui.keyCode.UP);\n            });\n\n            it('Escape key closes menu', function() {\n                view.menu.open({\n                    animate: false,\n                });\n                expect(view.menu.isOpen).toBeTrue();\n\n                sendKeyDown($.ui.keyCode.ESCAPE);\n\n                expect(view.menu.isOpen).toBeFalse();\n            });\n        });\n\n        it('focusout closes menu', function() {\n            view.menu.open({\n                animate: false,\n            });\n\n            expect(view.menu.isOpen).toBeTrue();\n\n            sendDropDownButtonEvent('focusout', {\n                relatedTarget: $testsScratch[0],\n            });\n\n            expect(view.menu.isOpen).toBeFalse();\n        });\n    });\n});\n"]}