(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[76478],{33897:function(t,n,e){"use strict";e.d(n,{q:function(){return i}});var r=e(58831),i=function(t){var n=[],e={};return Object.keys(t).forEach((function(i){var o=t[i];"group"===(0,r.M)(i)?n.push(o):e[i]=o})),n.forEach((function(t){return t.attributes.entity_id.forEach((function(t){delete e[t]}))})),{groups:n,ungrouped:e}}},11950:function(t,n,e){"use strict";function r(t,n,e,r,i,o,a){try{var u=t[o](a),c=u.value}catch(s){return void e(s)}u.done?n(c):Promise.resolve(c).then(r,i)}e.d(n,{l:function(){return i}});var i=function(){var t,n=(t=regeneratorRuntime.mark((function t(n,e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var r=e(n,(function(n){r(),t(n)}))})));case 1:case"end":return t.stop()}}),t)})),function(){var n=this,e=arguments;return new Promise((function(i,o){var a=t.apply(n,e);function u(t){r(a,i,o,u,c,"next",t)}function c(t){r(a,i,o,u,c,"throw",t)}u(void 0)}))});return function(t,e){return n.apply(this,arguments)}}()},57066:function(t,n,e){"use strict";e.d(n,{Lo:function(){return a},IO:function(){return u},qv:function(){return c},sG:function(){return l}});var r=e(95282),i=e(85415),o=e(38346),a=function(t,n){return t.callWS(Object.assign({type:"config/area_registry/create"},n))},u=function(t,n,e){return t.callWS(Object.assign({type:"config/area_registry/update",area_id:n},e))},c=function(t,n){return t.callWS({type:"config/area_registry/delete",area_id:n})},s=function(t){return t.sendMessagePromise({type:"config/area_registry/list"}).then((function(t){return t.sort((function(t,n){return(0,i.q)(t.name,n.name)}))}))},f=function(t,n){return t.subscribeEvents((0,o.D)((function(){return s(t).then((function(t){return n.setState(t,!0)}))}),500,!0),"area_registry_updated")},l=function(t,n){return(0,r.B)("_areaRegistry",s,f,t,n)}},57292:function(t,n,e){"use strict";e.d(n,{jL:function(){return c},t1:function(){return s},q4:function(){return y}});var r=e(95282),i=e(91741),o=e(38346);function a(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return u(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return u(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){c=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(c)throw o}}}}function u(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var c=function(t,n,e){return t.name_by_user||t.name||e&&function(t,n){var e,r=a(n||[]);try{for(r.s();!(e=r.n()).done;){var o=e.value,u="string"==typeof o?o:o.entity_id,c=t.states[u];if(c)return(0,i.C)(c)}}catch(s){r.e(s)}finally{r.f()}}(n,e)||n.localize("ui.panel.config.devices.unnamed_device")},s=function(t,n,e){return t.callWS(Object.assign({type:"config/device_registry/update",device_id:n},e))},f=function(t){return t.sendMessagePromise({type:"config/device_registry/list"})},l=function(t,n){return t.subscribeEvents((0,o.D)((function(){return f(t).then((function(t){return n.setState(t,!0)}))}),500,!0),"device_registry_updated")},y=function(t,n){return(0,r.B)("_dr",f,l,t,n)}},74186:function(t,n,e){"use strict";e.d(n,{eD:function(){return a},Mw:function(){return u},vA:function(){return c},L3:function(){return s},Nv:function(){return f},z3:function(){return l},LM:function(){return p}});var r=e(95282),i=e(91741),o=e(38346),a=function(t,n){return n.find((function(n){return t.states[n.entity_id]&&"battery"===t.states[n.entity_id].attributes.device_class}))},u=function(t,n){return n.find((function(n){return t.states[n.entity_id]&&"battery_charging"===t.states[n.entity_id].attributes.device_class}))},c=function(t,n){if(n.name)return n.name;var e=t.states[n.entity_id];return e?(0,i.C)(e):null},s=function(t,n){return t.callWS({type:"config/entity_registry/get",entity_id:n})},f=function(t,n,e){return t.callWS(Object.assign({type:"config/entity_registry/update",entity_id:n},e))},l=function(t,n){return t.callWS({type:"config/entity_registry/remove",entity_id:n})},y=function(t){return t.sendMessagePromise({type:"config/entity_registry/list"})},d=function(t,n){return t.subscribeEvents((0,o.D)((function(){return y(t).then((function(t){return n.setState(t,!0)}))}),500,!0),"entity_registry_updated")},p=function(t,n){return(0,r.B)("_entityRegistry",y,d,t,n)}},23197:function(t,n,e){"use strict";e.d(n,{VG:function(){return m},AP:function(){return b}});var r=e(58831),i=e(22311),o=e(91741),a=e(33897),u=e(85415),c=e(5986),s=e(41499);function f(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||d(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==e)return;var r,i,o=[],a=!0,u=!1;try{for(e=e.call(t);!(a=(r=e.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==e.return||e.return()}finally{if(u)throw i}}return o}(t,n)||d(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=d(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(u)throw o}}}}function d(t,n){if(t){if("string"==typeof t)return p(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?p(t,n):void 0}}function p(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var v=new Set(["automation","configurator","device_tracker","geo_location","persistent_notification","zone"]),h=new Set(["mobile_app"]),m=function(t,n){var e,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=[],u=[],c=n.title?"".concat(n.title," "):void 0,f=y(t);try{for(f.s();!(e=f.n()).done;){var d=l(e.value,2),p=d[0],v=d[1],h=(0,r.M)(p);if("alarm_control_panel"===h){var m={type:"alarm-panel",entity:p};a.push(m)}else if("camera"===h){var b={type:"picture-entity",entity:p};a.push(b)}else if("climate"===h){var _={type:"thermostat",entity:p};a.push(_)}else if("humidifier"===h){var w={type:"humidifier",entity:p};a.push(w)}else if("light"===h&&i){var S={type:"light",entity:p};a.push(S)}else if("media_player"===h){var A={type:"media-control",entity:p};a.push(A)}else if("plant"===h){var j={type:"plant-status",entity:p};a.push(j)}else if("weather"===h){var E={type:"weather-forecast",entity:p,show_forecast:!1};a.push(E)}else if("sensor"===h&&(null==v?void 0:v.attributes.device_class)===s.A);else{var O=void 0,k=c&&v&&(O=(0,o.C)(v))!==c&&O.startsWith(c)?{entity:p,name:g(O.substr(c.length))}:p;u.push(k)}}}catch(C){f.e(C)}finally{f.f()}return u.length>0&&a.unshift(Object.assign({type:"entities",entities:u},n)),a},g=function(t){return(n=t.substr(0,t.indexOf(" "))).toLowerCase()!==n?t:t[0].toUpperCase()+t.slice(1);var n},b=function(t,n,e,r,s){var d,p=function(t,n){var e={},r=new Set(n.filter((function(t){return h.has(t.platform)})).map((function(t){return t.entity_id})));return Object.keys(t).forEach((function(n){var o=t[n];v.has((0,i.N)(o))||r.has(o.entity_id)||(e[n]=t[n])})),e}(r,e),g={};Object.keys(p).forEach((function(t){var n=p[t];n.attributes.order&&(g[t]=n.attributes.order)}));var b=function(t,n,e,r){var i,o=Object.assign({},r),a=[],u=y(t);try{var c=function(){var t,r=i.value,u=[],c=new Set(n.filter((function(t){return t.area_id===r.area_id})).map((function(t){return t.id}))),s=y(e);try{for(s.s();!(t=s.n()).done;){var f=t.value;(c.has(f.device_id)&&!f.area_id||f.area_id===r.area_id)&&f.entity_id in o&&(u.push(o[f.entity_id]),delete o[f.entity_id])}}catch(l){s.e(l)}finally{s.f()}u.length>0&&a.push([r,u])};for(u.s();!(i=u.n()).done;)c()}catch(s){u.e(s)}finally{u.f()}return{areasWithEntities:a,otherEntities:o}}(t,n,e,p),_=function(t,n,e,r,s,f){var l=(0,a.q)(s);l.groups.sort((function(t,n){return f[t.entity_id]-f[n.entity_id]}));var y={};Object.keys(l.ungrouped).forEach((function(t){var n=l.ungrouped[t],e=(0,i.N)(n);e in y||(y[e]=[]),y[e].push(n.entity_id)}));var d=[];l.groups.forEach((function(t){d=d.concat(m(t.attributes.entity_id.map((function(t){return[t,s[t]]})),{title:(0,o.C)(t),show_header_toggle:"hidden"!==t.attributes.control}))})),Object.keys(y).sort().forEach((function(n){d=d.concat(m(y[n].sort((function(t,n){return(0,u.q)((0,o.C)(s[t]),(0,o.C)(s[n]))})).map((function(t){return[t,s[t]]})),{title:(0,c.Lh)(t,n)}))}));var p={path:n,title:e,cards:d};return r&&(p.icon=r),p}(s,"default_view","Home",undefined,b.otherEntities,g),w=[];return b.areasWithEntities.forEach((function(t){var n=l(t,2),e=n[0],r=n[1];w.push.apply(w,f(m(r.map((function(t){return[t.entity_id,t]})),{title:e.name})))})),(d=_.cards).unshift.apply(d,w),_}},76478:function(t,n,e){"use strict";e.r(n),e.d(n,{OriginalStatesStrategy:function(){return v}});var r=e(4915),i=e(11950),o=e(57066),a=e(57292),u=e(74186),c=e(23197);function s(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==e)return;var r,i,o=[],a=!0,u=!1;try{for(e=e.call(t);!(a=(r=e.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==e.return||e.return()}finally{if(u)throw i}}return o}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return f(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return f(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function l(t,n,e,r,i,o,a){try{var u=t[o](a),c=u.value}catch(s){return void e(s)}u.done?n(c):Promise.resolve(c).then(r,i)}function y(t){return function(){var n=this,e=arguments;return new Promise((function(r,i){var o=t.apply(n,e);function a(t){l(o,r,i,a,u,"next",t)}function u(t){l(o,r,i,a,u,"throw",t)}a(void 0)}))}}function d(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=!1,v=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,e,f,l,v;return n=t,e=null,f=[{key:"generateView",value:(v=y(regeneratorRuntime.mark((function t(n){var e,f,l,y,d,v,h,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=n.hass).config.state!==r.UE){t.next=3;break}return t.abrupt("return",{cards:[{type:"starting"}]});case 3:if(!e.config.safe_mode){t.next=5;break}return t.abrupt("return",{cards:[{type:"safe-mode"}]});case 5:return p||(p=!0,(0,o.sG)(e.connection,(function(){})),(0,a.q4)(e.connection,(function(){})),(0,u.LM)(e.connection,(function(){}))),t.next=8,Promise.all([(0,i.l)(e.connection,o.sG),(0,i.l)(e.connection,a.q4),(0,i.l)(e.connection,u.LM),e.loadBackendTranslation("title")]);case 8:return f=t.sent,l=s(f,4),y=l[0],d=l[1],v=l[2],h=l[3],m=(0,c.AP)(y,d,v,e.states,h),e.config.components.includes("geo_location")&&m&&m.cards&&m.cards.push({type:"map",geo_location_sources:["all"]}),0===m.cards.length&&m.cards.push({type:"empty-state"}),t.abrupt("return",m);case 18:case"end":return t.stop()}}),t)}))),function(t){return v.apply(this,arguments)})},{key:"generateDashboard",value:(l=y(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{title:n.hass.config.location_name,views:[{strategy:{type:"original-states"}}]});case 1:case"end":return t.stop()}}),t)}))),function(t){return l.apply(this,arguments)})}],e&&d(n.prototype,e),f&&d(n,f),t}()}}]);
//# sourceMappingURL=f5bbba7e.js.map