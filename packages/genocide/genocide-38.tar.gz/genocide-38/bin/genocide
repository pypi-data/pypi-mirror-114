#!/usr/bin/env python3
# This file is placed in the Public Domain.


"genocide"

__version__ = 38


import os, sys

sys.path.insert(0, os.getcwd())

import atexit
import bot.all
import genocide
import genocide.all
import ob
import os
import sys
import termios
import trm

ob.wd = os.path.expanduser("~/.genocide")

from ob import Restart, Handler, Kernel, launch
from trm import Runtime, CLI, Console

from bot.irc import Cfg

Cfg.cc = '!'
Cfg.channel = "#genocide"
Cfg.nick = "genocide"
Cfg.port = 6667
Cfg.server = "localhost"
Cfg.realname = "http://genocide.rtfd.io otp.informationdesk@icc-cpi.int OTP-CR-117/19"
Cfg.username = "genocide"
Cfg.users = False

def ver(event):
    event.reply("GENOCIDE %s" % __version__)


k = Runtime()
k.cfg.p = "bot,genocide"
name = "genocide"

def main():
    k.add(ver)
    k.boot(name)
    if k.cfg.txt:
        cli = CLI()
        return k.cmd(cli, k.cfg.txt)
    if k.opts("c"):
        csl = Console()
        csl.start()
        k.start()
        k.cfg.m += ",bot.irc,genocide.sui"
        k.init(k.cfg.m)
        k.wait()


trm.wrap(main)
