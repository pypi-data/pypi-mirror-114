(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[6478],{85415:(t,e,s)=>{"use strict";s.d(e,{q:()=>i,w:()=>n});const i=(t,e)=>t<e?-1:t>e?1:0,n=(t,e)=>i(t.toLowerCase(),e.toLowerCase())},11950:(t,e,s)=>{"use strict";s.d(e,{l:()=>i});const i=async(t,e)=>new Promise((s=>{const i=e(t,(t=>{i(),s(t)}))}))},57066:(t,e,s)=>{"use strict";s.d(e,{Lo:()=>r,IO:()=>o,qv:()=>c,sG:()=>y});var i=s(95282),n=s(85415),a=s(38346);const r=(t,e)=>t.callWS({type:"config/area_registry/create",...e}),o=(t,e,s)=>t.callWS({type:"config/area_registry/update",area_id:e,...s}),c=(t,e)=>t.callWS({type:"config/area_registry/delete",area_id:e}),d=t=>t.sendMessagePromise({type:"config/area_registry/list"}).then((t=>t.sort(((t,e)=>(0,n.q)(t.name,e.name))))),l=(t,e)=>t.subscribeEvents((0,a.D)((()=>d(t).then((t=>e.setState(t,!0)))),500,!0),"area_registry_updated"),y=(t,e)=>(0,i.B)("_areaRegistry",d,l,t,e)},57292:(t,e,s)=>{"use strict";s.d(e,{jL:()=>r,t1:()=>o,q4:()=>l});var i=s(95282),n=s(91741),a=s(38346);const r=(t,e,s)=>t.name_by_user||t.name||s&&((t,e)=>{for(const s of e||[]){const e="string"==typeof s?s:s.entity_id,i=t.states[e];if(i)return(0,n.C)(i)}})(e,s)||e.localize("ui.panel.config.devices.unnamed_device"),o=(t,e,s)=>t.callWS({type:"config/device_registry/update",device_id:e,...s}),c=t=>t.sendMessagePromise({type:"config/device_registry/list"}),d=(t,e)=>t.subscribeEvents((0,a.D)((()=>c(t).then((t=>e.setState(t,!0)))),500,!0),"device_registry_updated"),l=(t,e)=>(0,i.B)("_dr",c,d,t,e)},74186:(t,e,s)=>{"use strict";s.d(e,{eD:()=>r,Mw:()=>o,vA:()=>c,L3:()=>d,Nv:()=>l,z3:()=>y,LM:()=>_});var i=s(95282),n=s(91741),a=s(38346);const r=(t,e)=>e.find((e=>t.states[e.entity_id]&&"battery"===t.states[e.entity_id].attributes.device_class)),o=(t,e)=>e.find((e=>t.states[e.entity_id]&&"battery_charging"===t.states[e.entity_id].attributes.device_class)),c=(t,e)=>{if(e.name)return e.name;const s=t.states[e.entity_id];return s?(0,n.C)(s):null},d=(t,e)=>t.callWS({type:"config/entity_registry/get",entity_id:e}),l=(t,e,s)=>t.callWS({type:"config/entity_registry/update",entity_id:e,...s}),y=(t,e)=>t.callWS({type:"config/entity_registry/remove",entity_id:e}),u=t=>t.sendMessagePromise({type:"config/entity_registry/list"}),p=(t,e)=>t.subscribeEvents((0,a.D)((()=>u(t).then((t=>e.setState(t,!0)))),500,!0),"entity_registry_updated"),_=(t,e)=>(0,i.B)("_entityRegistry",u,p,t,e)},38926:(t,e,s)=>{"use strict";s.d(e,{VG:()=>y,AP:()=>_});var i=s(58831),n=s(22311),a=s(91741);var r=s(85415),o=s(5986),c=s(41499);const d=new Set(["automation","configurator","device_tracker","geo_location","persistent_notification","zone"]),l=new Set(["mobile_app"]),y=(t,e,s=!1)=>{const n=[],r=[],o=e.title?`${e.title} `:void 0;for(const[e,d]of t){const t=(0,i.M)(e);if("alarm_control_panel"===t){const t={type:"alarm-panel",entity:e};n.push(t)}else if("camera"===t){const t={type:"picture-entity",entity:e};n.push(t)}else if("climate"===t){const t={type:"thermostat",entity:e};n.push(t)}else if("humidifier"===t){const t={type:"humidifier",entity:e};n.push(t)}else if("light"===t&&s){const t={type:"light",entity:e};n.push(t)}else if("media_player"===t){const t={type:"media-control",entity:e};n.push(t)}else if("plant"===t){const t={type:"plant-status",entity:e};n.push(t)}else if("weather"===t){const t={type:"weather-forecast",entity:e,show_forecast:!1};n.push(t)}else if("sensor"===t&&(null==d?void 0:d.attributes.device_class)===c.A);else{let t;const s=o&&d&&(t=(0,a.C)(d))!==o&&t.startsWith(o)?{entity:e,name:u(t.substr(o.length))}:e;r.push(s)}}return r.length>0&&n.unshift({type:"entities",entities:r,...e}),n},u=t=>{return(e=t.substr(0,t.indexOf(" "))).toLowerCase()!==e?t:t[0].toUpperCase()+t.slice(1);var e},p=(t,e,s,c,d,l)=>{const u=(t=>{const e=[],s={};return Object.keys(t).forEach((n=>{const a=t[n];"group"===(0,i.M)(n)?e.push(a):s[n]=a})),e.forEach((t=>t.attributes.entity_id.forEach((t=>{delete s[t]})))),{groups:e,ungrouped:s}})(d);u.groups.sort(((t,e)=>l[t.entity_id]-l[e.entity_id]));const p={};Object.keys(u.ungrouped).forEach((t=>{const e=u.ungrouped[t],s=(0,n.N)(e);s in p||(p[s]=[]),p[s].push(e.entity_id)}));let _=[];u.groups.forEach((t=>{_=_.concat(y(t.attributes.entity_id.map((t=>[t,d[t]])),{title:(0,a.C)(t),show_header_toggle:"hidden"!==t.attributes.control}))})),Object.keys(p).sort().forEach((e=>{_=_.concat(y(p[e].sort(((t,e)=>(0,r.q)((0,a.C)(d[t]),(0,a.C)(d[e])))).map((t=>[t,d[t]])),{title:(0,o.Lh)(t,e)}))}));const f={path:e,title:s,cards:_};return c&&(f.icon=c),f},_=(t,e,s,i,a)=>{const r=((t,e)=>{const s={},i=new Set(e.filter((t=>l.has(t.platform))).map((t=>t.entity_id)));return Object.keys(t).forEach((e=>{const a=t[e];d.has((0,n.N)(a))||i.has(a.entity_id)||(s[e]=t[e])})),s})(i,s),o={};Object.keys(r).forEach((t=>{const e=r[t];e.attributes.order&&(o[t]=e.attributes.order)}));const c=((t,e,s,i)=>{const n={...i},a=[];for(const i of t){const t=[],r=new Set(e.filter((t=>t.area_id===i.area_id)).map((t=>t.id)));for(const e of s)(r.has(e.device_id)&&!e.area_id||e.area_id===i.area_id)&&e.entity_id in n&&(t.push(n[e.entity_id]),delete n[e.entity_id]);t.length>0&&a.push([i,t])}return{areasWithEntities:a,otherEntities:n}})(t,e,s,r),u=p(a,"default_view","Home",undefined,c.otherEntities,o),_=[];return c.areasWithEntities.forEach((([t,e])=>{_.push(...y(e.map((t=>[t.entity_id,t])),{title:t.name}))})),u.cards.unshift(..._),u}},76478:(t,e,s)=>{"use strict";s.r(e),s.d(e,{OriginalStatesStrategy:()=>l});var i=s(4915),n=s(11950),a=s(57066),r=s(57292),o=s(74186),c=s(38926);let d=!1;class l{static async generateView(t){const e=t.hass;if(e.config.state===i.UE)return{cards:[{type:"starting"}]};if(e.config.safe_mode)return{cards:[{type:"safe-mode"}]};d||(d=!0,(0,a.sG)(e.connection,(()=>{})),(0,r.q4)(e.connection,(()=>{})),(0,o.LM)(e.connection,(()=>{})));const[s,l,y,u]=await Promise.all([(0,n.l)(e.connection,a.sG),(0,n.l)(e.connection,r.q4),(0,n.l)(e.connection,o.LM),e.loadBackendTranslation("title")]),p=(0,c.AP)(s,l,y,e.states,u);return e.config.components.includes("geo_location")&&p&&p.cards&&p.cards.push({type:"map",geo_location_sources:["all"]}),0===p.cards.length&&p.cards.push({type:"empty-state"}),p}static async generateDashboard(t){return{title:t.hass.config.location_name,views:[{strategy:{type:"original-states"}}]}}}}}]);
//# sourceMappingURL=9e047f28.js.map