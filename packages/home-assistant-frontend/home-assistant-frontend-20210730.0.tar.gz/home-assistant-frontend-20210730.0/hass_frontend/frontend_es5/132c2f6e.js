(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[6054],{55424:function(e,r,n){"use strict";function t(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,r){if(!e)return;if("string"==typeof e)return u(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,r)}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var t=0,o=function(){};return{s:o,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}n.d(r,{Bm:function(){return o},o1:function(){return a},iK:function(){return i},rl:function(){return s},xZ:function(){return c},ZC:function(){return f},_Z:function(){return l},Jj:function(){return p}});var o=function(){return{stat_energy_from:"",stat_cost:null,entity_energy_from:null,entity_energy_price:null,number_energy_price:null}},a=function(){return{stat_energy_to:"",stat_compensation:null,entity_energy_to:null,entity_energy_price:null,number_energy_price:null}},i=function(){return{type:"grid",flow_from:[],flow_to:[],cost_adjustment_day:0}},s=function(){return{type:"solar",stat_energy_from:"",config_entry_solar_forecast:null}},c=function(e){return e.callWS({type:"energy/info"})},f=function(e){return e.callWS({type:"energy/get_prefs"})},l=function(e,r){return e.callWS(Object.assign({type:"energy/save_prefs"},r))},p=function(e){var r,n={},u=t(e.energy_sources);try{for(u.s();!(r=u.n()).done;){var o=r.value;o.type in n?n[o.type].push(o):n[o.type]=[o]}}catch(a){u.e(a)}finally{u.f()}return n}},66054:function(e,r,n){"use strict";n.r(r),n.d(r,{EnergyStrategy:function(){return s}});var t=n(55424);function u(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function o(e,r,n,t,u,o,a){try{var i=e[o](a),s=i.value}catch(c){return void n(c)}i.done?r(s):Promise.resolve(s).then(t,u)}function a(e){return function(){var r=this,n=arguments;return new Promise((function(t,u){var a=e.apply(r,n);function i(e){o(a,t,u,i,s,"next",e)}function s(e){o(a,t,u,i,s,"throw",e)}i(void 0)}))}}var i=function(){var e=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(8161),n.e(8985),n.e(1657),n.e(3762),n.e(8432),n.e(363)]).then(n.bind(n,55158));case 2:return e.abrupt("return",{type:"panel",cards:[{type:"custom:energy-setup-wizard-card"}]});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,n,o,s;return r=e,n=null,o=[{key:"generateView",value:(s=a(regeneratorRuntime.mark((function e(r){var n,u,o,a,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.hass,u={cards:[]},e.prev=2,e.next=5,(0,t.ZC)(n);case 5:o=e.sent,e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(2),"not_found"!==e.t0.code){e.next=12;break}return e.abrupt("return",i());case 12:return u.cards.push({type:"markdown",content:"An error occured while fetching your energy preferences: ".concat(e.t0.message,".")}),e.abrupt("return",u);case 14:return u.type="sidebar",a=o.energy_sources.find((function(e){return"grid"===e.type})),s=a&&a.flow_to.length,c=o.energy_sources.some((function(e){return"solar"===e.type})),a&&u.cards.push({title:"Energy usage",type:"energy-usage-graph",prefs:o}),c&&u.cards.push({title:"Solar production",type:"energy-solar-graph",prefs:o}),a&&u.cards.push({title:"Energy distribution",type:"energy-distribution",prefs:o,view_layout:{position:"sidebar"}}),(a||c)&&u.cards.push({title:"Sources",type:"energy-sources-table",prefs:o}),c&&u.cards.push({type:"energy-solar-consumed-gauge",prefs:o,view_layout:{position:"sidebar"}}),s&&u.cards.push({type:"energy-grid-neutrality-gauge",prefs:o,view_layout:{position:"sidebar"}}),a&&u.cards.push({type:"energy-carbon-consumed-gauge",prefs:o,view_layout:{position:"sidebar"}}),o.device_consumption.length&&u.cards.push({title:"Monitor individual devices",type:"energy-devices-graph",prefs:o}),e.abrupt("return",u);case 27:case"end":return e.stop()}}),e,null,[[2,8]])}))),function(e){return s.apply(this,arguments)})}],n&&u(r.prototype,n),o&&u(r,o),e}()}}]);
//# sourceMappingURL=132c2f6e.js.map